"use strict";(self.webpackChunkTestReact=self.webpackChunkTestReact||[]).push([[507],{6098:function(e,n,t){t.d(n,{t:function(){return i},z:function(){return r}});var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:768;return window.innerWidth<e},r=function(){return window.innerWidth>window.innerHeight?window.innerWidth:window.innerHeight}},4469:function(e,n,t){t.d(n,{V:function(){return j}});var i=t(3144),r=t(5671),o=t(7326),s=t(136),a=t(9388),c=t(6274),u=t(9359),l=t(9049),d=t.n(l),f=t(2791),m=t(8492),h=(0,u.Z)("addTitle"),v=(0,u.Z)("clearDom"),p=function(e){(0,s.Z)(t,e);var n=(0,a.Z)(t);function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,r.Z)(this,t),e=n.call(this),Object.defineProperty((0,o.Z)(e),v,{value:g}),Object.defineProperty((0,o.Z)(e),h,{value:x}),(0,c.Z)((0,o.Z)(e),v)[v](),t.isStats&&(e.showPanel(s),e.dom.style.left=82*t.count+"px",e.dom.classList.add("stats"),(0,c.Z)((0,o.Z)(e),h)[h](i),t.count++,console.log(t.count),document.body.appendChild(e.dom)),e}return(0,i.Z)(t)}(d());function x(e){var n=document.createElement("p");n.innerHTML=e,this.dom.append(n)}function g(){if(0==p.count||!p.isStats)for(var e=document.getElementsByClassName("stats");e.length>0;)e[0].remove()}p.isStats=!0,p.count=0;var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var n=(0,f.useMemo)((function(){return new(d())}),[]);(0,f.useEffect)((function(){n.showPanel(e),n.dom.style.left="auto",n.dom.style.right=0,document.body.appendChild(n.dom)})),(0,m.A)((function(){n.begin(),n.end()}))}}},8507:function(e,n,t){t.r(n),t.d(n,{default:function(){return H}});var i=t(9439),r=t(2791),o=t(7738),s=t(5892),a=t(2878),c=t(3092),u=t(6549),l=t(6098),d=t(4469),f=t(7760),m=t(8492),h=t(2227),v=t(1413),p=t(4925),x=t(184),g=["material"],j={mass:1,friction:1,tension:100},y=function(e){var n=e.color,t=void 0===n?16724838:n,o=e.emissive,s=void 0===o?16711680:o,a=e.emissiveIntensity,c=void 0===a?20:a,u=(e.position,e.rotation,e.scaleKoef),l=void 0===u?1:u,d=(0,r.useMemo)((function(){return new f.MeshPhongMaterial({color:t,flatShading:!0,emissive:s,emissiveIntensity:c,toneMapped:!1})}),[t,s,c]),y=(0,r.useState)(!1),w=(0,i.Z)(y,2),M=w[0],b=w[1],Z=(0,r.useState)(!1),S=(0,i.Z)(Z,2),C=S[0],z=S[1],R=function(e){var n=e.material,t=(0,p.Z)(e,g),i=(0,r.useMemo)((function(){return new f.Shape}),[]);i.moveTo(25,25),i.bezierCurveTo(25,25,20,0,0,0),i.bezierCurveTo(-30,0,-30,35,-30,35),i.bezierCurveTo(-30,55,-10,77,25,95),i.bezierCurveTo(60,77,80,55,80,35),i.bezierCurveTo(80,35,80,0,50,0),i.bezierCurveTo(35,0,25,25,25,25),i.moveTo(0,0);var o={depth:8,bevelEnabled:!0,bevelSegments:2,steps:2,bevelSize:1,bevelThickness:1},s=(0,r.useMemo)((function(){return new f.ExtrudeGeometry(i,o)}),[]);void 0==n&&(n=(0,r.useMemo)((function(){return new f.MeshPhongMaterial}),[n]));var a=(0,r.useMemo)((function(){return new f.Mesh(s,n)}),[s,n]),c=(0,r.useRef)(a);return(0,r.useEffect)((function(){s.center()})),(0,x.jsx)(h.animated.mesh,(0,v.Z)({ref:c,geometry:s,material:n},t))}({material:d,position:[0,0,0],rotation:[110,0,0],onClick:function(){return z((function(e){return!e}))},scale:(0,h.useSpring)({scale:C?M?1.4*l:1.3*l:M?1.1*l:1*l,config:j}).scale});return(0,m.A)((function(e,n){setInterval((function(){return b((function(e){return!e}))}),2),R.ref.current.rotation.y+=1*-n})),R},w=["color","emissive","emissiveIntensity"],M=function(e){var n=e.color,t=void 0===n?16777215:n,i=e.emissive,o=void 0===i?16777215:i,s=e.emissiveIntensity,a=void 0===s?2:s,c=(0,p.Z)(e,w),u=(0,r.useMemo)((function(){return new f.IcosahedronGeometry(1,1)}),[]),l=(0,r.useMemo)((function(){return new f.MeshPhongMaterial({color:t,wireframe:!0,wireframeLinecap:"square",wireframeLinewidth:2,side:f.DoubleSide,emissive:o,emissiveIntensity:a,toneMapped:!1})}),[t,o,a]),d=(0,r.useRef)();return(0,m.A)((function(e,n){d.current.rotation.x+=.1*-n,d.current.rotation.y+=.2*-n})),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("mesh",(0,v.Z)({ref:d,geometry:u,material:l,scale:[150,150,150]},c))})},b=(0,l.z)();b<768&&(b*=1.5);var Z=b<2560?b:2560,S=2;b>1920?S=4:b>1440&&(S=3);var C=f.MathUtils.randFloatSpread,z=new f.MeshPhongMaterial({color:16777215,flatShading:!0,emissive:10066329,emissiveIntensity:2,toneMapped:!1}),R=function(e){var n=e.size,t=void 0===n?S:n,i=e.count,o=void 0===i?Z:i,s=(0,r.useMemo)((function(){return new f.TetrahedronGeometry(t,0)}),[t]),a=(0,r.useRef)();return(0,r.useEffect)((function(){for(var e=new f.Object3D,n=0;n<o;n++)e.position.set(C(b),C(b),C(b)),e.rotation.set(C(180),C(180),C(180)),e.updateMatrix(),a.current.setMatrixAt(n,e.matrix);a.current.instanceMatrix.needsUpdate=!0})),(0,m.A)((function(e,n){a.current.rotation.y+=.4*-n})),(0,x.jsx)("instancedMesh",{ref:a,args:[s,z,o]})},T=t(9738),E=function(){var e=(0,m.z)(),n=e.camera,t=e.gl,i=(0,r.useMemo)((function(){return new T.z(n,t.domElement)}),[n,t]);return(0,r.useEffect)((function(){return i.minDistance=200,i.maxDistance=600,i.enablePan=!1,i.rotateSpeed=.5,function(){i.dispose()}}),[n,t]),(0,m.A)((function(e){i.enableDamping=!0,i.dampingFactor=.1,i.update()})),null},L=(0,l.t)(),F=function(){return(0,d.V)(0,!1)},I=function(){return(0,x.jsx)(u.xC,{children:(0,x.jsx)(u.dp,{intensity:.05})})},A=function(){return(0,x.jsxs)(s.Xz,{className:"app",camera:{position:[0,0,400],fov:75,near:1,far:1e3},gl:{powerPreference:"high-performance",alpha:!0,antialias:!0,stencil:!1,depth:!!L},children:[(0,x.jsx)(a.q,{all:!0}),(0,x.jsx)(c.S,{pixelated:!0}),(0,x.jsx)(E,{}),(0,x.jsx)(F,{}),L?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(y,{emissive:16724838,emissiveIntensity:1}),(0,x.jsx)(M,{emissiveIntensity:1})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("ambientLight",{color:16724838,intensity:2}),(0,x.jsx)("directionalLight",{intensity:2,position:[1,0,0],color:16777215}),(0,x.jsx)("directionalLight",{intensity:2,position:[.75,1,.5],color:1173691}),(0,x.jsx)("directionalLight",{intensity:2,position:[-.75,-1,.5],color:8519881}),(0,x.jsx)(y,{}),(0,x.jsx)(M,{}),(0,x.jsx)(I,{})]}),(0,x.jsx)(R,{})]})},P=t(3433),k=t(7496),N=t(4931),X=t(1269),D=0,_=.175,B=0,G=function(){var e=(0,r.useState)([]),n=(0,i.Z)(e,2),t=n[0],a=n[1],u=(0,r.useRef)(),l=(0,r.useMemo)((function(){return new f.TorusGeometry(.062,.01,2,100)}),[]),d=(0,r.useMemo)((function(){return new f.MeshBasicMaterial({color:16746717})}),[]),m=function(){return t.length<1?((0,k.hw)((function(e){e.decompose(u.current.position,u.current.rotation,u.current.scale)})),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("group",{ref:u,children:(0,x.jsx)("mesh",{geometry:l,material:d,rotation:[90,0,0],position:[0,-.126,0]})})})):(0,x.jsx)(x.Fragment,{})},h=function(){var e=t.length;if(e<1){var n=u.current.position,i=(0,r.cloneElement)((0,x.jsxs)("group",{children:[(0,x.jsx)(y,{emissive:16724838,emissiveIntensity:1,scaleKoef:5e-4}),(0,x.jsx)(M,{scale:[.075,.075,.075]})]}),{key:e,position:[n.x+D,n.y+_,n.z+B]});a((function(e){return[].concat((0,P.Z)(e),[i])}))}},v=function(e){h()},p=function(){(0,N.c)("select",v)};return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(s.Xz,{className:"AR-preview",gl:{powerPreference:"high-performance",alpha:!0,antialias:!0,stencil:!1,depth:!0},children:[(0,x.jsx)(c.S,{pixelated:!0}),(0,x.jsxs)(o.XR,{referenceSpace:"local",onSessionEnd:function(e){a([])},children:[(0,x.jsx)(X.z,{}),t.length<1?(0,x.jsx)(m,{}):(0,x.jsx)(x.Fragment,{}),(0,x.jsx)("ambientLight",{color:16724838,intensity:2}),(0,x.jsx)("directionalLight",{intensity:2,position:[1,0,0],color:16777215}),(0,x.jsx)("directionalLight",{intensity:2,position:[.75,1,.5],color:1173691}),(0,x.jsx)("directionalLight",{intensity:2,position:[-.75,-1,.5],color:8519881}),t.length<1?(0,x.jsxs)(x.Fragment,{children:[(0,P.Z)(t),(0,x.jsx)(p,{})]}):(0,x.jsx)(k.vj,{onSelect:function(e){e.intersection.object.__r3f.parent.children[0].__r3f.handlers.onClick()},children:(0,P.Z)(t)})]})]})})},H=function(){var e=(0,r.useState)(null),n=(0,i.Z)(e,2),t=n[0],s=n[1],a=(0,r.useState)((0,x.jsx)(A,{})),c=(0,i.Z)(a,2),u=c[0],l=c[1];(0,r.useEffect)((function(){s(document.getElementById("root").getElementsByClassName("container")[0])}));var d=function(e){l((0,x.jsx)(G,{})),t.classList.add("XR-mode")},f=function(e){l((0,x.jsx)(A,{})),t.classList.remove("XR-mode")};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o._A,{className:"AR-btn",children:function(e){return"unsupported"==e?(0,x.jsx)("div",{className:"XR-start",children:"AR is unsupported"}):"exited"==e?(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"XR-start",onClick:d,children:"Try AR"})}):(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"XR-stop",onClick:f,children:"Exit"})})}}),u]})}}}]);
//# sourceMappingURL=507.79709b23.chunk.js.map